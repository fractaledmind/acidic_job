#!/usr/bin/env ruby
# This command will automatically be run when you run "rails" with Rails gems
# installed from the root of your application.

ENGINE_ROOT = File.expand_path("..", __dir__)
ENGINE_PATH = File.expand_path("../lib/acidic_job/engine", __dir__)
APP_PATH = File.expand_path("../test/dummy/config/application", __dir__)

# Set up gems listed in the Gemfile.
ENV["BUNDLE_GEMFILE"] ||= File.expand_path("../Gemfile", __dir__)
require "bundler/setup" if File.exist?(ENV["BUNDLE_GEMFILE"])

# Start SimpleCov BEFORE loading Rails or the gem code.
# This ensures all gem code is tracked for coverage.
# Only start when running tests (not db:setup, etc.)
if ENV["COVERAGE"] && ARGV.first == "test"
  require "simplecov"
  SimpleCov.start
end

require "rails/all"
require "rails/engine/commands"
